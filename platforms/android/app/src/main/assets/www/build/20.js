webpackJsonp([20],{844:function(l,n,e){"use strict";function u(l){return f["ɵvid"](0,[(l()(),f["ɵeld"](0,0,null,null,2,"div",[["align","right"],["class","myOverlay"]],null,null,null,null,null)),(l()(),f["ɵted"](1,null,[""," off"])),f["ɵppd"](2,1)],null,function(l,n){l(n,1,0,f["ɵunv"](n,1,0,l(n,2,0,f["ɵnov"](n.parent.parent.parent,0),(n.parent.context.$implicit.actual_amount-n.parent.context.$implicit.deal_amount)/n.parent.context.$implicit.actual_amount)))})}function t(l){return f["ɵvid"](0,[(l()(),f["ɵeld"](0,0,null,null,1,"div",[["align","right"],["class","myOverlay"]],null,null,null,null,null)),(l()(),f["ɵted"](1,null,["","% off"]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.percentage)})}function i(l){return f["ɵvid"](0,[(l()(),f["ɵeld"](0,0,null,null,2,"p",[["class","title"]],null,null,null,null,null)),(l()(),f["ɵted"](1,null,["",""])),f["ɵppd"](2,4)],null,function(l,n){l(n,1,0,f["ɵunv"](n,1,0,l(n,2,0,f["ɵnov"](n.parent.parent.parent,1),n.parent.context.$implicit.deal_amount,"GBP","symbol","1.2-2")))})}function a(l){return f["ɵvid"](0,[(l()(),f["ɵeld"](0,0,null,null,2,"p",[["class","strikethrough"]],null,null,null,null,null)),(l()(),f["ɵted"](1,null,["",""])),f["ɵppd"](2,4)],null,function(l,n){l(n,1,0,f["ɵunv"](n,1,0,l(n,2,0,f["ɵnov"](n.parent.parent.parent,1),n.parent.context.$implicit.actual_amount,"GBP","symbol","1.2-2")))})}function o(l){return f["ɵvid"](0,[(l()(),f["ɵeld"](0,0,null,null,1,"p",[["style","color:black"]],null,null,null,null,null)),(l()(),f["ɵted"](1,null,["","..."]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.description.substr(0,50))})}function d(l){return f["ɵvid"](0,[(l()(),f["ɵeld"](0,0,null,null,76,"ion-card",[["tappable",""],["text-wrap",""]],null,null,null,null,null)),f["ɵdid"](1,16384,null,0,$.a,[T.a,f.ElementRef,f.Renderer],null,null),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵeld"](3,0,null,null,17,"ion-row",[["class","row"]],null,null,null,null,null)),f["ɵdid"](4,16384,null,0,P.a,[],null,null),(l()(),f["ɵted"](-1,null,["\n            "])),(l()(),f["ɵeld"](6,0,null,null,8,"ion-col",[["align-self-start",""],["class","col"],["col-10",""]],null,null,null,null,null)),f["ɵdid"](7,16384,null,0,F.a,[],null,null),(l()(),f["ɵted"](-1,null,["\n              "])),(l()(),f["ɵeld"](9,0,null,null,1,"h2",[],null,null,null,null,null)),(l()(),f["ɵted"](10,null,["",""])),(l()(),f["ɵted"](-1,null,["\n              "])),(l()(),f["ɵeld"](12,0,null,null,1,"p",[["class","title"]],null,null,null,null,null)),(l()(),f["ɵted"](13,null,["","+ Redeemed"])),(l()(),f["ɵted"](-1,null,["\n            "])),(l()(),f["ɵted"](-1,null,["\n            "])),(l()(),f["ɵeld"](16,0,null,null,3,"ion-col",[["align-self-start",""],["class","col"],["col-2",""]],null,null,null,null,null)),f["ɵdid"](17,16384,null,0,F.a,[],null,null),(l()(),f["ɵted"](-1,null,["          \n              "])),(l()(),f["ɵted"](-1,null,["\n            "])),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵeld"](22,0,null,null,10,"ion-row",[["class","row"]],null,[[null,"click"]],function(l,n,e){var u=!0;if("click"===n){u=!1!==l.component.navDealPage(l.context.$implicit)&&u}return u},null,null)),f["ɵdid"](23,16384,null,0,P.a,[],null,null),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵeld"](25,0,null,null,0,"img",[["class","slide-image"]],[[8,"src",4]],null,null,null,null)),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵand"](16777216,null,null,1,null,u)),f["ɵdid"](28,16384,null,0,L.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵand"](16777216,null,null,1,null,t)),f["ɵdid"](31,16384,null,0,L.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵeld"](34,0,null,null,19,"ion-row",[["class","row"]],null,[[null,"click"]],function(l,n,e){var u=!0;if("click"===n){u=!1!==l.component.navDealPage(l.context.$implicit)&&u}return u},null,null)),f["ɵdid"](35,16384,null,0,P.a,[],null,null),(l()(),f["ɵted"](-1,null,["\n            "])),(l()(),f["ɵeld"](37,0,null,null,5,"ion-col",[["align-self-start",""],["class","col"],["col-9",""]],null,null,null,null,null)),f["ɵdid"](38,16384,null,0,F.a,[],null,null),(l()(),f["ɵted"](-1,null,["\n              "])),(l()(),f["ɵeld"](40,0,null,null,1,"h2",[],null,null,null,null,null)),(l()(),f["ɵted"](41,null,["",""])),(l()(),f["ɵted"](-1,null,["\n            "])),(l()(),f["ɵted"](-1,null,["\n            "])),(l()(),f["ɵeld"](44,0,null,null,8,"ion-col",[["align-self-end",""],["class","col"],["col-3",""]],null,null,null,null,null)),f["ɵdid"](45,16384,null,0,F.a,[],null,null),(l()(),f["ɵted"](-1,null,["\n                "])),(l()(),f["ɵand"](16777216,null,null,1,null,i)),f["ɵdid"](48,16384,null,0,L.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),f["ɵted"](-1,null,["\n                "])),(l()(),f["ɵand"](16777216,null,null,1,null,a)),f["ɵdid"](51,16384,null,0,L.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),f["ɵted"](-1,null,["\n            "])),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵeld"](55,0,null,null,9,"ion-row",[["class","row"]],null,[[null,"click"]],function(l,n,e){var u=!0;if("click"===n){u=!1!==l.component.navDealPage(l.context.$implicit)&&u}return u},null,null)),f["ɵdid"](56,16384,null,0,P.a,[],null,null),(l()(),f["ɵted"](-1,null,["\n              "])),(l()(),f["ɵeld"](58,0,null,null,5,"ion-col",[["class","col"]],null,null,null,null,null)),f["ɵdid"](59,16384,null,0,F.a,[],null,null),(l()(),f["ɵted"](-1,null,["\n                "])),(l()(),f["ɵand"](16777216,null,null,1,null,o)),f["ɵdid"](62,16384,null,0,L.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),f["ɵted"](-1,null,["\n              "])),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵeld"](66,0,null,null,9,"ion-row",[["class","row"]],null,[[null,"click"]],function(l,n,e){var u=!0;if("click"===n){u=!1!==l.component.navDealPage(l.context.$implicit)&&u}return u},null,null)),f["ɵdid"](67,16384,null,0,P.a,[],null,null),(l()(),f["ɵted"](-1,null,["\n              "])),(l()(),f["ɵeld"](69,0,null,null,5,"ion-col",[["class","col"]],null,null,null,null,null)),f["ɵdid"](70,16384,null,0,F.a,[],null,null),(l()(),f["ɵted"](-1,null,["\n                "])),(l()(),f["ɵeld"](72,0,null,null,1,"h4",[["class","title"]],null,null,null,null,null)),(l()(),f["ɵted"](73,null,["",""])),(l()(),f["ɵted"](-1,null,["\n              "])),(l()(),f["ɵted"](-1,null,["\n          "])),(l()(),f["ɵted"](-1,null,["\n        "]))],function(l,n){l(n,28,0,n.context.$implicit.actual_amount>0);l(n,31,0,n.context.$implicit.actual_amount<=0&&n.context.$implicit.percentage>0);l(n,48,0,n.context.$implicit.deal_amount>0);l(n,51,0,n.context.$implicit.actual_amount>0);l(n,62,0,null!=n.context.$implicit.description)},function(l,n){var e=n.component;l(n,10,0,n.context.$implicit.business_name);l(n,13,0,n.context.$implicit.redemption_count);l(n,25,0,f["ɵinlineInterpolate"](2,"",e.image_dir,"",n.context.$implicit.image_dir,""));l(n,41,0,n.context.$implicit.title);l(n,73,0,e.getDateDiff(n.context.$implicit.end_date))})}function c(l){return f["ɵvid"](0,[(l()(),f["ɵeld"](0,0,null,null,9,"ion-item",[["class","item item-block"],["no-margin",""],["no-padding",""]],null,null,null,N.b,N.a)),f["ɵdid"](1,1097728,null,3,A.a,[E.a,T.a,f.ElementRef,f.Renderer,[2,S.a]],null,null),f["ɵqud"](335544320,1,{contentLabel:0}),f["ɵqud"](603979776,2,{_buttons:1}),f["ɵqud"](603979776,3,{_icons:1}),f["ɵdid"](5,16384,null,0,M.a,[],null,null),(l()(),f["ɵted"](-1,2,["\n        "])),(l()(),f["ɵand"](16777216,null,2,1,null,d)),f["ɵdid"](8,802816,null,0,L.NgForOf,[f.ViewContainerRef,f.TemplateRef,f.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),f["ɵted"](-1,2,["\n      "]))],function(l,n){l(n,8,0,n.component.deals)},null)}function r(l){return f["ɵvid"](0,[(l()(),f["ɵeld"](0,0,null,null,9,"ion-item",[["class","item item-block"],["no-margin",""],["no-padding",""]],null,null,null,N.b,N.a)),f["ɵdid"](1,1097728,null,3,A.a,[E.a,T.a,f.ElementRef,f.Renderer,[2,S.a]],null,null),f["ɵqud"](335544320,4,{contentLabel:0}),f["ɵqud"](603979776,5,{_buttons:1}),f["ɵqud"](603979776,6,{_icons:1}),f["ɵdid"](5,16384,null,0,M.a,[],null,null),(l()(),f["ɵted"](-1,2,["\n          "])),(l()(),f["ɵeld"](7,0,null,2,1,"p",[["class","title"],["style","font-weight: bolder;"],["text-center",""]],null,null,null,null,null)),(l()(),f["ɵted"](-1,null,["No Record Found"])),(l()(),f["ɵted"](-1,2,["\n      "]))],null,null)}function s(l){return f["ɵvid"](0,[f["ɵpid"](0,L.PercentPipe,[f.LOCALE_ID]),f["ɵpid"](0,L.CurrencyPipe,[f.LOCALE_ID]),(l()(),f["ɵeld"](2,0,null,null,8,"ion-list",[["no-lines",""],["style","overflow-y: scroll !important"]],null,null,null,null,null)),f["ɵdid"](3,16384,null,0,O.a,[T.a,f.ElementRef,f.Renderer,V.a,q.m,B.a],null,null),(l()(),f["ɵted"](-1,null,["\n    "])),(l()(),f["ɵand"](16777216,null,null,1,null,c)),f["ɵdid"](6,16384,null,0,L.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),f["ɵted"](-1,null,["\n      "])),(l()(),f["ɵand"](16777216,null,null,1,null,r)),f["ɵdid"](9,16384,null,0,L.NgIf,[f.ViewContainerRef,f.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),f["ɵted"](-1,null,["\n"]))],function(l,n){var e=n.component;l(n,6,0,(null==e.deals?null:e.deals.length)>0);l(n,9,0,0==(null==e.deals?null:e.deals.length))},null)}Object.defineProperty(n,"__esModule",{value:!0});var f=e(1),p=(e(0),e(59),e(183)),m=e(189),g=e(55),h=e(182),v=function(){function l(l,n,e,u,t){this.navCtrl=l,this.navParams=n,this.dealsService=e,this.merchantService=u,this.authService=t,this.deals=[],this.authToken="",this.getAllDeals(),this.image_dir=g.a.BASE_URL}return l.prototype.ionViewDidLoad=function(){},l.prototype.getAllDeals=function(){var l=this;this.dealsService.getAllParentDeals(0).then(function(n){n&&n.length>0&&n.forEach(function(n){l.merchantService.getMerchantDetails(n.merchant_id).then(function(l){l&&l[0]&&l[0].business_name&&(n.business_name=l[0].business_name)})}),l.deals=n})},l.prototype.navDealPage=function(l,n){var e=this;if(void 0===n&&(n=!1),n)this.dealsService.getAllParentDeals(0).then(function(n){n.filter(function(n){if(n.deal_id==l.parent_deal_id){e.navCtrl.parent.push("DealPage",{deal:l})}})});else{this.navCtrl.parent.push("DealPage",{deal:l})}},l.prototype.getDateDiff=function(l,n){void 0===n&&(n=!1);var e=new Date,u=new Date(l).getTime()-e.getTime(),t=Math.floor(u/864e5),i=Math.floor(u/36e5)-24*t,a=Math.floor(u/6e4)-(24*t*60+60*i),o=Math.floor(u/1e3)-(24*t*60*60+60*i*60+60*a),d="";return t<0?d="Deal is Expired !!!":0==t&&0==i&&0==a&&0==o?d="Deal is Expired !!!":(d=n&&0==t?"only today":t+" days ",n||(d+=("00"+i).slice(-2)+":"+("00"+a).slice(-2)+":"+("00"+o).slice(-2)+" left")),d},l.prototype.isFavorite=function(l){return""!==this.authToken&&(console.log("This deal is wished "+l),this.dealsService.getAllUserDeals(this.authToken).then(function(n){if(n.filter(function(n){return l==n.deal_id}).length>0)return!0}),!1)},l.prototype.favorite=function(l){var n=this;""===this.authToken?this.authService.getAuthToken().then(function(e){if(e)n.authToken=e,n.setFavoriteDeal(l,!0);else{n.navCtrl.parent.push("LoginPage")}}):this.setFavoriteDeal(l,!0)},l.prototype.unFavorite=function(l){var n=this;""===this.authToken?this.authService.getAuthToken().then(function(e){if(e)n.authToken=e,n.setFavoriteDeal(l,!1);else{n.navCtrl.parent.push("LoginPage")}}):this.setFavoriteDeal(l,!1)},l.prototype.setFavoriteDeal=function(l,n){this.dealsService.setWishDeal(this.authToken,l.deal_id,n?1:0).then(function(l){console.log("setFavoriteDeal "+l)})},l}(),D=function(){return function(){}}(),_=e(509),R=e(510),y=e(511),w=e(512),x=e(513),I=e(514),b=e(515),k=e(516),C=e(517),$=e(191),T=e(4),P=e(185),F=e(184),L=e(19),N=e(518),A=e(28),E=e(25),S=e(63),M=e(119),O=e(87),V=e(7),q=e(12),B=e(14),z=e(32),G=e(17),U=f["ɵcrt"]({encapsulation:2,styles:[],data:{}}),j=f["ɵccf"]("page-deals-deals",v,function(l){return f["ɵvid"](0,[(l()(),f["ɵeld"](0,0,null,null,1,"page-deals-deals",[],null,null,null,s,U)),f["ɵdid"](1,49152,null,0,v,[z.a,G.a,p.a,m.a,h.a],null,null)],null,null)},{},{},[]),J=e(27),W=e(181),H=e(54);e.d(n,"DealsDealsPageModuleNgFactory",function(){return K});var K=f["ɵcmf"](D,[],function(l){return f["ɵmod"]([f["ɵmpd"](512,f.ComponentFactoryResolver,f["ɵCodegenComponentFactoryResolver"],[[8,[_.a,R.a,y.a,w.a,x.a,I.a,b.a,k.a,C.a,j]],[3,f.ComponentFactoryResolver],f.NgModuleRef]),f["ɵmpd"](4608,L.NgLocalization,L.NgLocaleLocalization,[f.LOCALE_ID,[2,L["ɵa"]]]),f["ɵmpd"](4608,J.s,J.s,[]),f["ɵmpd"](4608,J.d,J.d,[]),f["ɵmpd"](512,L.CommonModule,L.CommonModule,[]),f["ɵmpd"](512,J.q,J.q,[]),f["ɵmpd"](512,J.g,J.g,[]),f["ɵmpd"](512,J.o,J.o,[]),f["ɵmpd"](512,W.a,W.a,[]),f["ɵmpd"](512,W.b,W.b,[]),f["ɵmpd"](512,D,D,[]),f["ɵmpd"](256,H.a,v,[])])})}});